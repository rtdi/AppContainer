<mvc:View height="100vh"
	controllerName="ui5app.Controller"
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m"
	xmlns:ui5libs="ui5libs"
	>
	<ui5libs:controls.AppContainerPage pageTitle="Radar Chart">
	    <ui5libs:amcharts.Chart
	    	id="dependencychart"
	    	width="100%"
	    	height="100%"
	    	localeFirstDayOfWeek="0"
	    	>
			<ui5libs:layoutData>
				<FlexItemData growFactor="1" />
			</ui5libs:layoutData>
			<ui5libs:themes>
				<ui5libs:amcharts.base.Theme>
					<ui5libs:amcharts.base.ThemeRuleNumber ruleName="Label" propertyName="fontSize" propertyValue="10" />
					<ui5libs:amcharts.base.ThemeRuleNumber ruleName="Grid" propertyName="strokeOpacity" propertyValue="0.06" />
				</ui5libs:amcharts.base.Theme>
			</ui5libs:themes>
			<ui5libs:dateFormatter>
				<ui5libs:amcharts.base.DateFormatter dateFormat="w" dateFields="valueX" />
			</ui5libs:dateFormatter>
			<ui5libs:children>
				<ui5libs:amcharts.base.RadarChart
					panX="false"
					panY="false"
					wheelX="panX"
					wheelY="zoomX"
					innerRadius="20%"
					radius="85%"
					startAngle="100"
					endAngle="440"
				>
					<ui5libs:subelements>
						<ui5libs:amcharts.base.Label text="Cycle distance {/totals/Distance}" textAlign="center" centerX="50%" centerY="50%" />
					</ui5libs:subelements>
				   	<ui5libs:customData>
				   		<ui5libs:controls.JsonContainer key="model" url="ui5app/data.json" >
				   			<ui5libs:modelTransformations>
				   				<ui5libs:libs.model.mt.ModelTransformation
									groupBy="firstdayofweek"
									sum="Distance"
									rootPropertyPath="/data"
									targetPropertyPath="/weeklytotals"
									totalsPropertyPath="/totals"
								/>
				   			</ui5libs:modelTransformations>
				   			<ui5libs:rowTransformations>
				   				<ui5libs:libs.model.mt.RowTransformation rootPropertyPath="/data">
				   					<ui5libs:libs.model.mt.ct.FirstDayOfWeek inputField="day" field="firstdayofweek" />
				   				</ui5libs:libs.model.mt.RowTransformation>
				   			</ui5libs:rowTransformations>
				   		</ui5libs:controls.JsonContainer>
				   	</ui5libs:customData>
					<ui5libs:xAxis>
						<ui5libs:amcharts.base.DateAxis
						>
							<ui5libs:baseInterval>
								<ui5libs:amcharts.base.ITimeInterval timeUnit="week" count="1" />
							</ui5libs:baseInterval>
							<ui5libs:ranges>
								<ui5libs:amcharts.base.axisranges.DateAxisRange step="month">
									<ui5libs:grid>
										<ui5libs:amcharts.base.Grid visible="false" />
									</ui5libs:grid>
									<ui5libs:label>
										<ui5libs:amcharts.base.AxisLabelRadial
											fillColor="#ffffff"
											textType="circular"
											radius="8"
										/>
									</ui5libs:label>
									<ui5libs:fill>
										<ui5libs:amcharts.base.AxisRendererCircular
											toggleKey="active"
											cursorOverStyle="pointer"
											visible="true"
											dRadius="25"
											innerRadius="-25pt" />
									</ui5libs:fill>
								</ui5libs:amcharts.base.axisranges.DateAxisRange>
							</ui5libs:ranges>
						</ui5libs:amcharts.base.DateAxis>
					</ui5libs:xAxis>
					<ui5libs:rendererX>
						<ui5libs:amcharts.base.AxisRendererCircular
							minGridDistance="20"
						>
							<ui5libs:labels>
								<ui5libs:amcharts.base.AxisLabelRadial
									radius="30"
									textType="radial"
									centerY="50%"
								>
								</ui5libs:amcharts.base.AxisLabelRadial>
							</ui5libs:labels>
						</ui5libs:amcharts.base.AxisRendererCircular>
					</ui5libs:rendererX>
					<ui5libs:yAxis>
						<ui5libs:amcharts.base.ValueAxis
							min="0"
						>
						</ui5libs:amcharts.base.ValueAxis>
						<ui5libs:amcharts.base.CategoryAxis
							categoryField="day"
							componentData="{/weekAxisData}"
						>
						</ui5libs:amcharts.base.CategoryAxis>
					</ui5libs:yAxis>
					<ui5libs:rendererY>
						<ui5libs:amcharts.base.AxisRendererRadial
							axisAngle="90"
							radius="60%"
							innerRadius="20%"
							inversed="true"
							minGridDistance="20"
						>
							<ui5libs:labels>
								<ui5libs:amcharts.base.AxisLabelRadial
									centerX="50%"
									minPosition="0.05"
									maxPosition="0.95"
								>
								</ui5libs:amcharts.base.AxisLabelRadial>
							</ui5libs:labels>
						</ui5libs:amcharts.base.AxisRendererRadial>
						<ui5libs:amcharts.base.AxisRendererRadial
							axisAngle="90"
							radius="100%"
							innerRadius="60%"
							minGridDistance="20"
						>
							<ui5libs:labels>
								<ui5libs:amcharts.base.AxisLabelRadial
									centerX="50%"
								>
								</ui5libs:amcharts.base.AxisLabelRadial>
							</ui5libs:labels>
						</ui5libs:amcharts.base.AxisRendererRadial>
					</ui5libs:rendererY>
					<ui5libs:series>
						<ui5libs:amcharts.base.RadarColumnSeries
							calculateAggregates="true"
							xAxisIndex="0" 
							yAxisIndex="0" 
							valueYField="Distance" 
							valueXField="firstdayofweek"
							componentData="{/weeklytotals}"
							templateName="DistanceSeries"
						>
							<ui5libs:heatRules>
								<ui5libs:amcharts.base.IHeatRule
									minColor="#673ab7"
									maxColor="#f44336"
									dataField="valueY"
									key="fill"
									targetTemplateName="DistanceSeries"
								>
								</ui5libs:amcharts.base.IHeatRule>
							</ui5libs:heatRules>
						</ui5libs:amcharts.base.RadarColumnSeries>
						<ui5libs:amcharts.base.RadarLineSeries
							xAxisIndex="0" 
							yAxisIndex="1" 
							valueField="Distance"
							xBaseAxisIndex="0"
							valueXField="day"
							categoryYField="weekday"
							calculateAggregates="true"
							maskBullets="false"
							componentData="{/data}"
						>
							<ui5libs:strokes>
								<ui5libs:amcharts.base.Graphics
									strokeOpacity="0"
								>
								</ui5libs:amcharts.base.Graphics>
							</ui5libs:strokes>
							<ui5libs:bullets>
								<ui5libs:amcharts.base.Bullet
									templateName="Bullet"
								>
									<ui5libs:sprite>
										<ui5libs:amcharts.base.Circle
										>
										</ui5libs:amcharts.base.Circle>
									</ui5libs:sprite>
								</ui5libs:amcharts.base.Bullet>
							</ui5libs:bullets>
							<ui5libs:heatRules>
								<ui5libs:amcharts.base.IHeatRule
									min="3"
									max="15"
									dataField="value"
									key="radius"
									targetTemplateName="Bullet"
								>
								</ui5libs:amcharts.base.IHeatRule>
							</ui5libs:heatRules>
						</ui5libs:amcharts.base.RadarLineSeries>
					</ui5libs:series>
				</ui5libs:amcharts.base.RadarChart>
			</ui5libs:children>
	    </ui5libs:amcharts.Chart>
    </ui5libs:controls.AppContainerPage>
</mvc:View>
